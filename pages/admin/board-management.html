<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê²Œì‹œíŒ ê´€ë¦¬ - Board Management- ë””ì§€í„¸í—¬ìŠ¤ì¼€ì–´ì„¼í„°</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100;300;400;500;700;900&display=swap"
        rel="stylesheet">
    <!-- Tailwind CSS Play CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../../assets/css/main.css">

    <!-- ê²½ë¡œ í—¬í¼ ìŠ¤í¬ë¦½íŠ¸ (í•­ìƒ ê°€ì¥ ë¨¼ì € ë¡œë“œë˜ì–´ì•¼ í•¨) -->
    <script src="../../assets/js/utils/script-loader.js"></script>

    <!-- WYSIWYG ì—ë””í„° ì „ìš© ìŠ¤íƒ€ì¼ -->
    <style>
        /* ğŸ¨ WYSIWYG ì—ë””í„° ìŠ¤íƒ€ì¼ */
        .wysiwyg-editor {
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            background: white;
            transition: border-color 0.2s ease;
        }

        .wysiwyg-editor:focus-within {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .wysiwyg-toolbar {
            display: flex;
            align-items: center;
            gap: 4px;
            padding: 8px 12px;
            background: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            border-radius: 6px 6px 0 0;
            flex-wrap: wrap;
        }

        .wysiwyg-toolbar-group {
            display: flex;
            align-items: center;
            gap: 2px;
            padding-right: 8px;
            margin-right: 8px;
            border-right: 1px solid #d1d5db;
        }

        .wysiwyg-toolbar-group:last-child {
            border-right: none;
            margin-right: 0;
            padding-right: 0;
        }

        .wysiwyg-btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            min-width: 32px;
            height: 32px;
            padding: 4px 8px;
            border: 1px solid #d1d5db;
            background: white;
            color: #374151;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.2s ease;
            user-select: none;
        }

        .wysiwyg-btn:hover {
            background: #f3f4f6;
            border-color: #9ca3af;
        }

        .wysiwyg-btn.active {
            background: #3b82f6;
            color: white;
            border-color: #3b82f6;
        }

        .wysiwyg-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .wysiwyg-content {
            min-height: 200px;
            max-height: 400px;
            padding: 12px;
            overflow-y: auto;
            line-height: 1.6;
            color: #374151;
            background: white;
            border-radius: 0 0 6px 6px;
        }

        .wysiwyg-content:focus {
            outline: none;
        }

        .wysiwyg-content p {
            margin: 0 0 8px 0;
        }

        .wysiwyg-content p:last-child {
            margin-bottom: 0;
        }

        .wysiwyg-content h1,
        .wysiwyg-content h2,
        .wysiwyg-content h3 {
            margin: 16px 0 8px 0;
            font-weight: 600;
        }

        .wysiwyg-content h1 {
            font-size: 1.5em;
        }

        .wysiwyg-content h2 {
            font-size: 1.3em;
        }

        .wysiwyg-content h3 {
            font-size: 1.1em;
        }

        .wysiwyg-content ul,
        .wysiwyg-content ol {
            margin: 8px 0;
            padding-left: 24px;
        }

        .wysiwyg-content li {
            margin: 4px 0;
        }

        .wysiwyg-content img {
            max-width: 100%;
            height: auto;
            margin: 8px 0;
            border-radius: 4px;
        }

        .wysiwyg-content a {
            color: #3b82f6;
            text-decoration: underline;
        }

        .wysiwyg-content blockquote {
            margin: 16px 0;
            padding: 12px 16px;
            background: #f9fafb;
            border-left: 4px solid #3b82f6;
            border-radius: 0 4px 4px 0;
        }

        /* íŒŒì¼ ì—…ë¡œë“œ ë“œë¡­ì¡´ ìŠ¤íƒ€ì¼ */
        .file-dropzone {
            border: 2px dashed #d1d5db;
            border-radius: 8px;
            padding: 24px;
            text-align: center;
            background: #f9fafb;
            cursor: pointer;
            transition: all 0.2s ease;
            margin: 8px 0;
        }

        .file-dropzone:hover,
        .file-dropzone.dragover {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .file-dropzone.dragover {
            transform: scale(1.02);
        }

        /* ì—…ë¡œë“œëœ íŒŒì¼ ë¯¸ë¦¬ë³´ê¸° */
        .uploaded-files {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 8px;
        }

        .uploaded-file {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 6px 12px;
            background: #f3f4f6;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 12px;
            color: #374151;
        }

        .uploaded-file .remove-file {
            cursor: pointer;
            color: #ef4444;
            font-weight: bold;
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            background: rgba(239, 68, 68, 0.1);
        }

        .uploaded-file .remove-file:hover {
            background: rgba(239, 68, 68, 0.2);
        }

        /* ë°˜ì‘í˜• ì¡°ì • */
        @media (max-width: 768px) {
            .wysiwyg-toolbar {
                padding: 6px 8px;
            }

            .wysiwyg-btn {
                min-width: 28px;
                height: 28px;
                font-size: 12px;
            }

            .wysiwyg-content {
                min-height: 150px;
                padding: 10px;
            }
        }
    </style>
</head>

<body class="bg-gray-100">
    <!-- ê´€ë¦¬ì í—¤ë” -->
    <header class="bg-indigo-800 text-white admin-header">
        <style>
            /* ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ë¡œ ê¹œë¹¡ì„ ë°©ì§€ */
            .admin-user-info {
                display: flex !important;
                opacity: 1 !important;
                visibility: visible !important;
            }

            #admin-name,
            #admin-email,
            #admin-logout-button {
                opacity: 1 !important;
                visibility: visible !important;
            }
        </style>
        <div class="container mx-auto px-4">
            <div class="flex items-center justify-between h-16">
                <!-- í† ê¸€ ë²„íŠ¼ ì¶”ê°€ -->
                <button class="admin-toggle-button" id="admin-sidebar-toggle" aria-label="ë©”ë‰´ í† ê¸€">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>

                <div class="flex items-center">
                    <a href="javascript:window.location.href=window.adjustPath('index.html')" class="admin-title">
                        ê´€ë¦¬ì í˜ì´ì§€
                    </a>
                </div>

                <!-- ì‚¬ìš©ì ì •ë³´ (ëª¨ë°”ì¼ì—ì„œ ìˆ¨ê¹€) -->
                <div class="flex items-center space-x-4 admin-user-info">
                    <span id="admin-name">ê´€ë¦¬ì</span>
                    <span id="admin-email" class="text-sm text-indigo-200">gostepexercise@gmail.com</span>
                    <button id="admin-logout-button"
                        class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-md text-sm">
                        ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- ì‚¬ì´ë“œë°” ì˜¤ë²„ë ˆì´ (ëª¨ë°”ì¼ìš©) -->
    <div id="sidebar-overlay" class="admin-sidebar-overlay"></div>

    <div class="flex">
        <!-- ì‚¬ì´ë“œë°” -->
        <aside class="w-64 bg-indigo-900 min-h-screen text-white admin-sidebar">
            <style>
                /* ì‚¬ì´ë“œë°” ì‚¬ìš©ì ì •ë³´ ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ */
                .sidebar-user-info {
                    opacity: 1 !important;
                    visibility: visible !important;
                    padding: 1rem;
                    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
                    margin-bottom: 1rem;
                    background-color: rgba(0, 0, 0, 0.2);
                }
            </style>

            <!-- ì‚¬ì´ë“œë°” ì‚¬ìš©ì ì •ë³´ (ì´ˆê¸°ì— ë¯¸ë¦¬ ì¶”ê°€) -->
            <div class="sidebar-user-info" style="opacity: 1 !important; visibility: visible !important;">
                <div class="text-white mb-2">
                    <div class="font-bold" style="opacity: 1 !important;">ê´€ë¦¬ì</div>
                    <div class="text-indigo-200 text-sm" style="opacity: 1 !important;">gostepexercise@gmail.com</div>
                </div>
                <button id="sidebar-logout-button"
                    class="bg-indigo-600 hover:bg-indigo-700 px-4 py-2 rounded-md text-sm text-white w-full"
                    style="opacity: 1 !important;">
                    ë¡œê·¸ì•„ì›ƒ
                </button>
            </div>

            <nav class="mt-8 admin-nav">
                <a href="javascript:window.location.href=window.adjustPath('pages/admin/dashboard.html')"
                    class="block px-6 py-3 text-indigo-300 hover:bg-indigo-600 hover:text-white transition duration-200">
                    <svg class="inline-block w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6">
                        </path>
                    </svg>
                    ëŒ€ì‹œë³´ë“œ
                </a>
                <a href="javascript:window.location.href=window.adjustPath('pages/admin/user-management.html')"
                    class="block px-6 py-3 text-indigo-300 hover:bg-indigo-600 hover:text-white transition duration-200">
                    <svg class="inline-block w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z">
                        </path>
                    </svg>
                    íšŒì› ê´€ë¦¬
                </a>
                <a href="javascript:window.location.href=window.adjustPath('pages/admin/course-management.html')"
                    class="block px-6 py-3 text-indigo-300 hover:bg-indigo-600 hover:text-white transition duration-200">
                    <svg class="inline-block w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253">
                        </path>
                    </svg>
                    êµìœ¡ ê´€ë¦¬
                </a>
                <a href="javascript:window.location.href=window.adjustPath('pages/admin/cert-management.html')"
                    class="block px-6 py-3 text-indigo-300 hover:bg-indigo-600 hover:text-white transition duration-200">
                    <svg class="inline-block w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z">
                        </path>
                    </svg>
                    ìê²©ì¦ ê´€ë¦¬
                </a>
                <a href="javascript:window.location.href=window.adjustPath('pages/admin/board-management.html')"
                    class="block px-6 py-3 bg-indigo-700 text-white">
                    <svg class="inline-block w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01">
                        </path>
                    </svg>
                    ê²Œì‹œíŒ ê´€ë¦¬
                </a>
                <a href="javascript:window.location.href=window.adjustPath('pages/admin/payment-management.html')"
                    class="block px-6 py-3 text-indigo-300 hover:bg-indigo-600 hover:text-white transition duration-200">
                    <svg class="inline-block w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z">
                        </path>
                    </svg>
                    ê²°ì œ ê´€ë¦¬
                </a>
            </nav>
        </aside>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <main class="flex-1 p-4 md:p-8 admin-content">
            <!-- ì•Œë¦¼ ì˜ì—­ -->
            <div id="admin-notification" style="display: none;"></div>

            <!-- í˜ì´ì§€ í—¤ë” -->
            <div class="mb-6 md:mb-8">
                <h1 class="text-2xl md:text-3xl font-bold text-gray-800">ê²Œì‹œíŒ ê´€ë¦¬</h1>
                <p class="text-gray-600 mt-2">ê²Œì‹œíŒë³„ ê²Œì‹œê¸€ì„ ê´€ë¦¬í•©ë‹ˆë‹¤.</p>
            </div>

            <!-- ê²Œì‹œíŒ ì„ íƒ íƒ­ -->
            <div class="border-b border-gray-200 mb-6">
                <nav class="-mb-px flex" id="board-tabs">
                    <button onclick="boardManager.switchBoard('notice')"
                        class="board-tab active border-indigo-500 text-indigo-600 whitespace-nowrap py-3 md:py-4 px-4 border-b-2 font-medium text-sm"
                        data-board="notice">
                        ê³µì§€ì‚¬í•­
                    </button>
                    <button onclick="boardManager.switchBoard('column')"
                        class="board-tab border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-3 md:py-4 px-4 border-b-2 font-medium text-sm"
                        data-board="column">
                        ì¹¼ëŸ¼
                    </button>
                    <button onclick="boardManager.switchBoard('materials')"
                        class="board-tab border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-3 md:py-4 px-4 border-b-2 font-medium text-sm"
                        data-board="materials">
                        ê°•ì˜ìë£Œ
                    </button>
                    <button onclick="boardManager.switchBoard('videos')"
                        class="board-tab border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300 whitespace-nowrap py-3 md:py-4 px-4 border-b-2 font-medium text-sm"
                        data-board="videos">
                        ë™ì˜ìƒ ê°•ì˜
                    </button>
                </nav>
            </div>

            <!-- ğŸ”§ ê²€ìƒ‰ ë° í•„í„° ì„¹ì…˜ (ë‹¤ë¥¸ ê´€ë¦¬ì í˜ì´ì§€ì™€ í†µì¼) -->
            <div class="admin-filters-container">
                <div class="admin-filters-grid">
                    <!-- ê²€ìƒ‰ ìœ í˜• ì„ íƒ -->
                    <div class="admin-filter-group">
                        <label for="search-type" class="admin-filter-label">ê²€ìƒ‰ ìœ í˜•</label>
                        <select id="search-type" class="admin-filter-select">
                            <option value="title">ì œëª©</option>
                            <option value="content">ë‚´ìš©</option>
                            <option value="author">ì‘ì„±ì</option>
                        </select>
                    </div>

                    <!-- ê²€ìƒ‰ í‚¤ì›Œë“œ -->
                    <div class="admin-filter-group md:col-span-2">
                        <label for="search-keyword" class="admin-filter-label">ê²€ìƒ‰ì–´</label>
                        <input type="text" id="search-keyword" placeholder="ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”" class="admin-filter-input">
                    </div>
                </div>

                <!-- ê²€ìƒ‰ ë²„íŠ¼ ê·¸ë£¹ -->
                <div class="admin-filter-actions">
                    <button onclick="boardManager.resetSearch()" class="admin-btn admin-btn-secondary">
                        <svg class="inline-block w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15">
                            </path>
                        </svg>
                        ì´ˆê¸°í™”
                    </button>
                    <button onclick="boardManager.search()" class="admin-btn admin-btn-primary">
                        <svg class="inline-block w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                        </svg>
                        ê²€ìƒ‰
                    </button>
                </div>
            </div>

            <!-- ğŸ¯ ê²Œì‹œê¸€ ëª©ë¡ í…Œì´ë¸” (ë°˜ì‘í˜• í†µì¼) -->
            <div class="admin-table-container">
                <div
                    class="p-4 md:p-6 border-b border-gray-200 flex flex-col md:flex-row justify-between md:items-center gap-4">
                    <h2 class="text-lg md:text-xl font-semibold text-gray-800">
                        <span id="board-title">ê³µì§€ì‚¬í•­</span> ëª©ë¡
                    </h2>
                    <button id="add-post-button" class="admin-btn admin-btn-primary whitespace-nowrap">
                        <svg class="inline-block w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
                        </svg>
                        ê²Œì‹œê¸€ ì¶”ê°€
                    </button>
                </div>
                <div class="overflow-x-auto">
                    <table id="board-table" class="admin-table admin-table-responsive">
                        <thead>
                            <tr>
                                <th>ì œëª©</th>
                                <th>ì‘ì„±ì</th>
                                <th>ì¡°íšŒìˆ˜</th>
                                <th>ì‘ì„±ì¼</th>
                                <th>ìƒíƒœ</th>
                                <th>ì‘ì—…</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td colspan="6" class="admin-loading-state">
                                    <div class="admin-loading-spinner"></div>
                                    <span class="text-gray-600">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘ì…ë‹ˆë‹¤...</span>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <!-- í˜ì´ì§€ë„¤ì´ì…˜ -->
                <div id="board-pagination" class="p-4 border-t border-gray-200"></div>
            </div>
        </main>
    </div>

    <!-- ğŸ¨ ê°œì„ ëœ ê²Œì‹œê¸€ ì¶”ê°€/ìˆ˜ì • ëª¨ë‹¬ - WYSIWYG ì—ë””í„° -->
    <div id="post-modal" class="fixed inset-0 z-50 hidden overflow-y-auto">
        <div class="flex items-center justify-center min-h-screen px-4">
            <div class="fixed inset-0 bg-black opacity-50" onclick="boardManager.closePostModal()"></div>
            <div class="relative bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
                <div class="p-4 md:p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg md:text-xl font-semibold" id="modal-title">ê²Œì‹œê¸€ ì¶”ê°€</h3>
                        <button onclick="boardManager.closePostModal()" class="text-gray-400 hover:text-gray-600">
                            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M6 18L18 6M6 6l12 12"></path>
                            </svg>
                        </button>
                    </div>
                    <form id="post-form" class="space-y-4">
                        <!-- ì¹´í…Œê³ ë¦¬ ì„ íƒ -->
                        <div class="form-group">
                            <label for="post-category" class="block text-sm font-medium text-gray-700 mb-1">ì¹´í…Œê³ ë¦¬</label>
                            <select id="post-category" name="category" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500">
                                <option value="">-- ì¹´í…Œê³ ë¦¬ ì„ íƒ --</option>
                            </select>
                        </div>

                        <!-- ì œëª© -->
                        <div class="form-group">
                            <label for="post-title" class="block text-sm font-medium text-gray-700 mb-1">ì œëª©</label>
                            <input type="text" id="post-title" name="title" required
                                class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-indigo-500"
                                placeholder="ê²Œì‹œê¸€ ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”">
                        </div>

                        <!-- ğŸ¨ WYSIWYG ì—ë””í„° ë‚´ìš© -->
                        <div class="form-group content-group">
                            <label for="post-content-editor"
                                class="block text-sm font-medium text-gray-700 mb-1">ë‚´ìš©</label>

                            <!-- WYSIWYG ì—ë””í„° ì˜ì—­ -->
                            <div class="wysiwyg-editor" id="wysiwyg-editor">
                                <!-- íˆ´ë°” -->
                                <div class="wysiwyg-toolbar">
                                    <!-- ê¸°ë³¸ í¬ë§·íŒ… ê·¸ë£¹ -->
                                    <div class="wysiwyg-toolbar-group">
                                        <button type="button" class="wysiwyg-btn" data-command="bold"
                                            title="êµµê²Œ (Ctrl+B)">
                                            <strong>B</strong>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" data-command="italic"
                                            title="ê¸°ìš¸ì„ (Ctrl+I)">
                                            <em>I</em>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" data-command="underline"
                                            title="ë°‘ì¤„ (Ctrl+U)">
                                            <u>U</u>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" data-command="strikethrough"
                                            title="ì·¨ì†Œì„ ">
                                            <s>S</s>
                                        </button>
                                    </div>

                                    <!-- ì œëª© ê·¸ë£¹ -->
                                    <div class="wysiwyg-toolbar-group">
                                        <select class="wysiwyg-btn" data-command="formatBlock" title="ì œëª©">
                                            <option value="">ì œëª©</option>
                                            <option value="h1">ì œëª© 1</option>
                                            <option value="h2">ì œëª© 2</option>
                                            <option value="h3">ì œëª© 3</option>
                                            <option value="p">ë³¸ë¬¸</option>
                                        </select>
                                    </div>

                                    <!-- ì •ë ¬ ê·¸ë£¹ -->
                                    <div class="wysiwyg-toolbar-group">
                                        <button type="button" class="wysiwyg-btn" data-command="justifyLeft"
                                            title="ì™¼ìª½ ì •ë ¬">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z" />
                                            </svg>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" data-command="justifyCenter"
                                            title="ê°€ìš´ë° ì •ë ¬">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z" />
                                            </svg>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" data-command="justifyRight"
                                            title="ì˜¤ë¥¸ìª½ ì •ë ¬">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z" />
                                            </svg>
                                        </button>
                                    </div>

                                    <!-- ë¦¬ìŠ¤íŠ¸ ê·¸ë£¹ -->
                                    <div class="wysiwyg-toolbar-group">
                                        <button type="button" class="wysiwyg-btn" data-command="insertUnorderedList"
                                            title="ê¸€ë¨¸ë¦¬ ê¸°í˜¸">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.67-1.5 1.5S3.17 19.5 4 19.5s1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z" />
                                            </svg>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" data-command="insertOrderedList"
                                            title="ë²ˆí˜¸ ë§¤ê¸°ê¸°">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z" />
                                            </svg>
                                        </button>
                                    </div>

                                    <!-- ë¯¸ë””ì–´ ê·¸ë£¹ -->
                                    <div class="wysiwyg-toolbar-group">
                                        <button type="button" class="wysiwyg-btn" id="insert-image-btn" title="ì´ë¯¸ì§€ ì‚½ì…">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2zM8.5 13.5l2.5 3.01L14.5 12l4.5 6H5l3.5-4.5z" />
                                            </svg>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" id="insert-link-btn" title="ë§í¬ ì‚½ì…">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z" />
                                            </svg>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" id="insert-file-btn" title="íŒŒì¼ ì²¨ë¶€">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M16.5 6v11.5c0 2.21-1.79 4-4 4s-4-1.79-4-4V5c0-1.38 1.12-2.5 2.5-2.5s2.5 1.12 2.5 2.5v10.5c0 .55-.45 1-1 1s-1-.45-1-1V6H10v9.5c0 1.38 1.12 2.5 2.5 2.5s2.5-1.12 2.5-2.5V5c0-2.21-1.79-4-4-4S7 2.79 7 5v12.5c0 3.04 2.46 5.5 5.5 5.5s5.5-2.46 5.5-5.5V6h-1.5z" />
                                            </svg>
                                        </button>
                                    </div>

                                    <!-- ê¸°íƒ€ ê·¸ë£¹ -->
                                    <div class="wysiwyg-toolbar-group">
                                        <button type="button" class="wysiwyg-btn" data-command="undo"
                                            title="ì‹¤í–‰ ì·¨ì†Œ (Ctrl+Z)">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z" />
                                            </svg>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" data-command="redo"
                                            title="ë‹¤ì‹œ ì‹¤í–‰ (Ctrl+Y)">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16c1.05-3.19 4.05-5.5 7.6-5.5 1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z" />
                                            </svg>
                                        </button>
                                        <button type="button" class="wysiwyg-btn" id="clear-format-btn" title="ì„œì‹ ì§€ìš°ê¸°">
                                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                                <path
                                                    d="M6 5v.18L8.82 8h2.4l-.72 1.68 2.1 2.1L14.21 8H20V6H9.82L6 2.18V5zm14.79 15.19-3.15-3.15-.71.71-.47-1.11L3.21 3.39 1.79 4.81 6.18 9.2 4.45 13h2.14l1.28-3.02 9.32 9.32 1.42-1.42zM12.56 12.56l-1.54 3.61H9.88l1.41-3.32.27-.29z" />
                                            </svg>
                                        </button>
                                    </div>
                                </div>

                                <!-- ì—ë””í„° ì»¨í…ì¸  ì˜ì—­ -->
                                <div class="wysiwyg-content" id="post-content-editor" contenteditable="true"
                                    data-placeholder="ê²Œì‹œê¸€ ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...">
                                </div>
                            </div>

                            <!-- ìˆ¨ê²¨ì§„ textarea (í¼ ì œì¶œìš©) -->
                            <textarea id="post-content" name="content" style="display: none;" required></textarea>

                            <!-- ğŸ¨ íŒŒì¼ ë“œë¡­ì¡´ -->
                            <div class="file-dropzone" id="file-dropzone">
                                <svg class="mx-auto h-12 w-12 text-gray-400" stroke="currentColor" fill="none"
                                    viewBox="0 0 48 48">
                                    <path
                                        d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02"
                                        stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                                </svg>
                                <div class="mt-2">
                                    <p class="text-sm text-gray-600">
                                        <span
                                            class="font-medium text-indigo-600 hover:text-indigo-500 cursor-pointer">í´ë¦­í•˜ì—¬
                                            íŒŒì¼ ì„ íƒ</span>
                                        ë˜ëŠ” ì—¬ê¸°ë¡œ ë“œë˜ê·¸ ì•¤ ë“œë¡­
                                    </p>
                                    <p class="text-xs text-gray-500 mt-1">
                                        ì´ë¯¸ì§€, PDF, DOC, XLS, PPT, HWP/HWPX(í•œê¸€), TXT, ZIP ë“± (ìµœëŒ€ 10MB)
                                    </p>
                                </div>
                            </div>

                            <!-- ì—…ë¡œë“œëœ íŒŒì¼ ëª©ë¡ -->
                            <div class="uploaded-files" id="uploaded-files"></div>

                            <!-- ìˆ¨ê²¨ì§„ íŒŒì¼ ì…ë ¥ -->
                            <input type="file" id="file-input" multiple
                                accept="image/*,.pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx,.txt,.csv,.rtf,.hwp,.hwpx,.zip,.rar,.7z"
                                style="display: none;">
                        </div>

                        <!-- í¼ ì•¡ì…˜ ë²„íŠ¼ -->
                        <div class="flex justify-end space-x-3 pt-4">
                            <button type="button" onclick="boardManager.closePostModal()"
                                class="px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                ì·¨ì†Œ
                            </button>
                            <button type="submit"
                                class="px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">
                                ì €ì¥
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- ğŸ”§ ë‹¤ë¥¸ ê´€ë¦¬ì í˜ì´ì§€ì™€ í†µì¼ëœ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© -->
    <script id="firebase-sdk-template" type="text/template">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"><\/script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"><\/script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"><\/script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"><\/script>

    <!-- ğŸ”§ 1. í•µì‹¬ ìœ í‹¸ë¦¬í‹°ë§Œ ë¨¼ì € ë¡œë“œ -->
    <script src="{basePath}assets/js/utils/formatters.js"><\/script>
    <script src="{basePath}assets/js/utils/date-utils.js"><\/script>

    <!-- ğŸ”§ 2. Firebase ì„¤ì • ë° ì„œë¹„ìŠ¤ -->
    <script src="{basePath}assets/js/config/firebase-config.js"><\/script>
    <script src="{basePath}assets/js/services/auth-service.js"><\/script>
    <script src="{basePath}assets/js/services/db-service.js"><\/script>
    <script src="{basePath}assets/js/services/storage-service.js"><\/script>
</script>

    <script id="additional-scripts-template" type="text/template">
    <!-- ğŸ”§ 3. í•„ìš”ì‹œì—ë§Œ ë¡œë“œë˜ëŠ” ìœ í‹¸ë¦¬í‹° -->
    <script src="{basePath}assets/js/utils/validators.js"><\/script>
    <script src="{basePath}assets/js/utils/dom-utils.js"><\/script>
    
    <!-- ğŸ”§ 4. ê´€ë¦¬ì ì „ìš© ìœ í‹¸ë¦¬í‹° -->
    <script src="{basePath}assets/js/utils/admin-auth.js"><\/script>
    
    <!-- ğŸ”§ 5. ê³µí†µ ì»´í¬ë„ŒíŠ¸ -->
    <script src="{basePath}assets/js/components/modal.js"><\/script>
    <script src="{basePath}assets/js/components/pagination.js"><\/script>
    <script src="{basePath}assets/js/components/toast.js"><\/script>
    
    <!-- ğŸ”§ 6. ê´€ë¦¬ì ê³µí†µ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="{basePath}assets/js/pages/admin.js"><\/script>
    
    <!-- ğŸ”§ 7. ê°œì„ ëœ ê²Œì‹œíŒ ê´€ë¦¬ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="{basePath}assets/js/pages/admin/board-management.js"><\/script>
</script>

    <!-- ğŸ¨ WYSIWYG ì—ë””í„° ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        // WYSIWYG ì—ë””í„° ì´ˆê¸°í™” ë° ê´€ë¦¬
        window.WysiwygEditor = {
            // ì—ë””í„° ìƒíƒœ
            editor: null,
            toolbar: null,
            isInitialized: false,
            uploadedFiles: [],

            // ì´ˆê¸°í™”
            init: function () {
                if (this.isInitialized) return;

                console.log('ğŸ¨ WYSIWYG ì—ë””í„° ì´ˆê¸°í™” ì‹œì‘');

                this.editor = document.getElementById('post-content-editor');
                this.toolbar = document.querySelector('.wysiwyg-toolbar');

                if (!this.editor || !this.toolbar) {
                    console.error('WYSIWYG ì—ë””í„° ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    return;
                }

                this.setupToolbar();
                this.setupEditor();
                this.setupFileUpload();
                this.setupKeyboardShortcuts();

                this.isInitialized = true;
                console.log('âœ… WYSIWYG ì—ë””í„° ì´ˆê¸°í™” ì™„ë£Œ');
            },

            // íˆ´ë°” ì„¤ì •
            setupToolbar: function () {
                const self = this;

                // ì¼ë°˜ ë²„íŠ¼ ì´ë²¤íŠ¸
                this.toolbar.querySelectorAll('.wysiwyg-btn[data-command]').forEach(btn => {
                    btn.addEventListener('click', function (e) {
                        e.preventDefault();
                        const command = this.getAttribute('data-command');
                        self.execCommand(command);
                    });
                });

                // ì œëª© ì…€ë ‰íŠ¸ ë°•ìŠ¤
                const formatSelect = this.toolbar.querySelector('select[data-command="formatBlock"]');
                if (formatSelect) {
                    formatSelect.addEventListener('change', function () {
                        if (this.value) {
                            self.execCommand('formatBlock', this.value);
                            this.selectedIndex = 0; // ë¦¬ì…‹
                        }
                    });
                }

                // íŠ¹ë³„ ë²„íŠ¼ë“¤
                const insertImageBtn = document.getElementById('insert-image-btn');
                const insertLinkBtn = document.getElementById('insert-link-btn');
                const insertFileBtn = document.getElementById('insert-file-btn');
                const clearFormatBtn = document.getElementById('clear-format-btn');

                if (insertImageBtn) {
                    insertImageBtn.addEventListener('click', () => this.insertImage());
                }
                if (insertLinkBtn) {
                    insertLinkBtn.addEventListener('click', () => this.insertLink());
                }
                if (insertFileBtn) {
                    insertFileBtn.addEventListener('click', () => this.openFileDialog());
                }
                if (clearFormatBtn) {
                    clearFormatBtn.addEventListener('click', () => this.clearFormat());
                }
            },

            // ì—ë””í„° ì„¤ì •
            setupEditor: function () {
                const self = this;

                // í”Œë ˆì´ìŠ¤í™€ë” ì²˜ë¦¬
                this.updatePlaceholder();

                this.editor.addEventListener('input', function () {
                    self.updatePlaceholder();
                    self.syncContent();
                });

                this.editor.addEventListener('keydown', function (e) {
                    // Enter í‚¤ ì²˜ë¦¬ (p íƒœê·¸ ìƒì„±)
                    if (e.key === 'Enter' && !e.shiftKey) {
                        if (!window.getSelection().rangeCount) return;

                        const range = window.getSelection().getRangeAt(0);
                        const currentElement = range.commonAncestorContainer.nodeType === Node.TEXT_NODE
                            ? range.commonAncestorContainer.parentElement
                            : range.commonAncestorContainer;

                        if (!currentElement.closest('p, h1, h2, h3, li')) {
                            e.preventDefault();
                            self.execCommand('formatBlock', 'p');
                        }
                    }
                });

                this.editor.addEventListener('paste', function (e) {
                    e.preventDefault();
                    const text = e.clipboardData.getData('text/plain');
                    self.insertText(text);
                });

                // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì²˜ë¦¬
                this.editor.addEventListener('dragover', function (e) {
                    e.preventDefault();
                });

                this.editor.addEventListener('drop', function (e) {
                    e.preventDefault();
                    const files = Array.from(e.dataTransfer.files);
                    if (files.length > 0) {
                        self.handleFileUpload(files);
                    }
                });
            },

            // íŒŒì¼ ì—…ë¡œë“œ ì„¤ì •
            setupFileUpload: function () {
                const self = this;
                const dropzone = document.getElementById('file-dropzone');
                const fileInput = document.getElementById('file-input');

                // ë“œë¡­ì¡´ í´ë¦­ ì´ë²¤íŠ¸
                dropzone.addEventListener('click', () => {
                    fileInput.click();
                });

                // íŒŒì¼ ì„ íƒ ì´ë²¤íŠ¸
                fileInput.addEventListener('change', function () {
                    if (this.files.length > 0) {
                        self.handleFileUpload(Array.from(this.files));
                    }
                });

                // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì´ë²¤íŠ¸
                dropzone.addEventListener('dragover', function (e) {
                    e.preventDefault();
                    this.classList.add('dragover');
                });

                dropzone.addEventListener('dragleave', function (e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                });

                dropzone.addEventListener('drop', function (e) {
                    e.preventDefault();
                    this.classList.remove('dragover');
                    const files = Array.from(e.dataTransfer.files);
                    if (files.length > 0) {
                        self.handleFileUpload(files);
                    }
                });
            },

            // í‚¤ë³´ë“œ ë‹¨ì¶•í‚¤ ì„¤ì •
            setupKeyboardShortcuts: function () {
                const self = this;

                this.editor.addEventListener('keydown', function (e) {
                    if (e.ctrlKey || e.metaKey) {
                        switch (e.key.toLowerCase()) {
                            case 'b':
                                e.preventDefault();
                                self.execCommand('bold');
                                break;
                            case 'i':
                                e.preventDefault();
                                self.execCommand('italic');
                                break;
                            case 'u':
                                e.preventDefault();
                                self.execCommand('underline');
                                break;
                            case 'z':
                                e.preventDefault();
                                self.execCommand('undo');
                                break;
                            case 'y':
                                e.preventDefault();
                                self.execCommand('redo');
                                break;
                        }
                    }
                });
            },

            // ëª…ë ¹ ì‹¤í–‰
            execCommand: function (command, value = null) {
                this.editor.focus();
                document.execCommand(command, false, value);
                this.updateToolbarState();
                this.syncContent();
            },

            // í…ìŠ¤íŠ¸ ì‚½ì…
            insertText: function (text) {
                this.editor.focus();
                document.execCommand('insertText', false, text);
                this.syncContent();
            },

            // HTML ì‚½ì…
            insertHTML: function (html) {
                this.editor.focus();
                document.execCommand('insertHTML', false, html);
                this.syncContent();
            },

            // ì´ë¯¸ì§€ ì‚½ì…
            insertImage: function () {
                const url = prompt('ì´ë¯¸ì§€ URLì„ ì…ë ¥í•˜ì„¸ìš”:', 'https://');
                if (url && url.trim() !== '' && url !== 'https://') {
                    const html = `<img src="${url}" alt="ì´ë¯¸ì§€" style="max-width: 100%; height: auto; margin: 8px 0;">`;
                    this.insertHTML(html);
                }
            },

            // ë§í¬ ì‚½ì…
            insertLink: function () {
                const selection = window.getSelection();
                const selectedText = selection.toString();

                const url = prompt('ë§í¬ URLì„ ì…ë ¥í•˜ì„¸ìš”:', 'https://');
                if (url && url.trim() !== '' && url !== 'https://') {
                    if (selectedText) {
                        const html = `<a href="${url}" target="_blank">${selectedText}</a>`;
                        this.insertHTML(html);
                    } else {
                        const linkText = prompt('ë§í¬ í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”:', url);
                        if (linkText) {
                            const html = `<a href="${url}" target="_blank">${linkText}</a>`;
                            this.insertHTML(html);
                        }
                    }
                }
            },

            // íŒŒì¼ ë‹¤ì´ì–¼ë¡œê·¸ ì—´ê¸°
            openFileDialog: function () {
                document.getElementById('file-input').click();
            },

            // ì„œì‹ ì§€ìš°ê¸°
            clearFormat: function () {
                this.execCommand('removeFormat');
                this.execCommand('unlink');
            },

            // íŒŒì¼ ì—…ë¡œë“œ ì²˜ë¦¬
            handleFileUpload: async function (files) {
                console.log('ğŸ“ íŒŒì¼ ì—…ë¡œë“œ ì‹œì‘:', files.length, 'ê°œ');

                for (const file of files) {
                    try {
                        // íŒŒì¼ ê²€ì¦
                        if (!this.validateFile(file)) {
                            continue;
                        }

                        // ì—…ë¡œë“œ ì§„í–‰ í‘œì‹œ
                        const fileId = this.addFileToList(file, 'uploading');

                        if (window.storageService && window.storageService.uploadFile) {
                            // Firebase Storage ì—…ë¡œë“œ
                            const path = `board-files/${Date.now()}_${file.name}`;
                            const result = await window.storageService.uploadFile(file, path);

                            if (result.success) {
                                // ì„±ê³µ ì‹œ íŒŒì¼ ì •ë³´ ì—…ë°ì´íŠ¸
                                this.updateFileInList(fileId, 'success', result.url);

                                // ğŸ¯ uploadedFiles ë°°ì—´ì— ì¶”ê°€ (ìˆ˜ì •ëœ ë¶€ë¶„)
                                this.uploadedFiles.push({
                                    id: fileId,
                                    name: file.name,
                                    url: result.url,
                                    path: path,
                                    type: file.type,
                                    size: file.size
                                });

                                console.log('âœ… íŒŒì¼ì´ uploadedFilesì— ì¶”ê°€ë¨:', this.uploadedFiles.length, 'ê°œ');

                                // ì´ë¯¸ì§€ì¸ ê²½ìš° ì—ë””í„°ì— ì‚½ì…
                                if (file.type.startsWith('image/')) {
                                    const html = `<img src="${result.url}" alt="${file.name}" style="max-width: 100%; height: auto; margin: 8px 0;">`;
                                    this.insertHTML(html);
                                }
                            } else {
                                // ì‹¤íŒ¨ ì‹œ
                                this.updateFileInList(fileId, 'error', null, result.error?.message || 'ì—…ë¡œë“œ ì‹¤íŒ¨');
                                console.error('âŒ íŒŒì¼ ì—…ë¡œë“œ ì‹¤íŒ¨:', result.error);
                            }
                        } else {
                            // storageServiceê°€ ì—†ëŠ” ê²½ìš° ë¡œì»¬ í…ŒìŠ¤íŠ¸
                            console.log('ğŸ§ª ë¡œì»¬ í…ŒìŠ¤íŠ¸ ëª¨ë“œ - íŒŒì¼ ì—…ë¡œë“œ ì‹œë®¬ë ˆì´ì…˜');
                            await new Promise(resolve => setTimeout(resolve, 1000));

                            const fakeUrl = URL.createObjectURL(file);
                            this.updateFileInList(fileId, 'success', fakeUrl);

                            // ğŸ¯ ë¡œì»¬ í…ŒìŠ¤íŠ¸ì—ì„œë„ uploadedFilesì— ì¶”ê°€
                            this.uploadedFiles.push({
                                id: fileId,
                                name: file.name,
                                url: fakeUrl,
                                path: `local/${file.name}`,
                                type: file.type,
                                size: file.size
                            });

                            console.log('âœ… ë¡œì»¬ íŒŒì¼ì´ uploadedFilesì— ì¶”ê°€ë¨:', this.uploadedFiles.length, 'ê°œ');

                            if (file.type.startsWith('image/')) {
                                const html = `<img src="${fakeUrl}" alt="${file.name}" style="max-width: 100%; height: auto; margin: 8px 0;">`;
                                this.insertHTML(html);
                            }
                        }

                    } catch (error) {
                        console.error('íŒŒì¼ ì—…ë¡œë“œ ì˜¤ë¥˜:', error);
                        if (typeof showToast === 'function') {
                            showToast(`íŒŒì¼ ì—…ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ${error.message}`, 'error');
                        }
                    }
                }

                // ğŸ¯ ì—…ë¡œë“œ ì™„ë£Œ í›„ í¼ ë™ê¸°í™”
                this.syncUploadedFilesToForm();
            },

            // ğŸ¯ ì—…ë¡œë“œëœ íŒŒì¼ì„ í¼ ë°ì´í„°ì— ë™ê¸°í™” (ìƒˆë¡œ ì¶”ê°€)
            syncUploadedFilesToForm: function () {
                console.log('ğŸ”„ ì—…ë¡œë“œëœ íŒŒì¼ì„ í¼ì— ë™ê¸°í™”:', this.uploadedFiles.length, 'ê°œ');

                // hidden inputì— íŒŒì¼ ì •ë³´ ì €ì¥ (ì„ íƒì‚¬í•­)
                const fileDataInput = document.getElementById('uploaded-files-data');
                if (!fileDataInput) {
                    const hiddenInput = document.createElement('input');
                    hiddenInput.type = 'hidden';
                    hiddenInput.id = 'uploaded-files-data';
                    hiddenInput.name = 'uploadedFilesData';
                    document.getElementById('post-form').appendChild(hiddenInput);
                }

                const fileDataElement = document.getElementById('uploaded-files-data');
                if (fileDataElement) {
                    fileDataElement.value = JSON.stringify(this.uploadedFiles);
                }
            },

            // íŒŒì¼ ê²€ì¦
            validateFile: function (file) {
                console.log('ğŸ“‹ íŒŒì¼ ê²€ì¦:', file.name, 'MIME íƒ€ì…:', file.type);

                // ğŸ”§ ìˆ˜ì •: í—ˆìš©ëœ MIME íƒ€ì…ë“¤ - .hwpx ê´€ë ¨ MIME íƒ€ì… ì¶”ê°€
                const allowedTypes = [
                    // ì´ë¯¸ì§€ íŒŒì¼
                    'image/jpeg', 'image/jpg', 'image/png', 'image/gif', 'image/webp', 'image/svg+xml',

                    // ë¬¸ì„œ íŒŒì¼
                    'application/pdf',
                    'application/msword',
                    'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
                    'application/vnd.ms-excel',
                    'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',
                    'application/vnd.ms-powerpoint',
                    'application/vnd.openxmlformats-officedocument.presentationml.presentation',

                    // í…ìŠ¤íŠ¸ íŒŒì¼
                    'text/plain', 'text/csv', 'application/rtf',

                    // ğŸ”§ í•œê¸€ íŒŒì¼ - .hwpxë¥¼ ìœ„í•œ MIME íƒ€ì… ì¶”ê°€
                    'application/x-hwp',
                    'application/haansofthwp',
                    'application/vnd.hancom.hwp',
                    'application/vnd.hancom.hwpx',  // ğŸ”§ ì¶”ê°€: HWPX ì „ìš© MIME íƒ€ì…
                    'application/hwpx',             // ğŸ”§ ì¶”ê°€: ì¼ë°˜ì ì¸ HWPX MIME íƒ€ì…
                    'application/octet-stream',     // í•œê¸€ íŒŒì¼ì´ ì´ íƒ€ì…ìœ¼ë¡œ ì¸ì‹ë˜ëŠ” ê²½ìš°ê°€ ë§ìŒ

                    // ì••ì¶• íŒŒì¼
                    'application/zip', 'application/x-rar-compressed', 'application/x-7z-compressed'
                ];

                const maxSize = 10 * 1024 * 1024; // 10MB

                // 1. MIME íƒ€ì…ìœ¼ë¡œ ë¨¼ì € ê²€ì¦
                let isValidType = allowedTypes.includes(file.type);

                // 2. MIME íƒ€ì…ì´ ë§¤ì¹˜ë˜ì§€ ì•Šìœ¼ë©´ íŒŒì¼ í™•ì¥ìë¡œ ê²€ì¦ (í•œê¸€ íŒŒì¼ ë“±)
                if (!isValidType) {
                    const fileName = file.name.toLowerCase();
                    // ğŸ”§ ìˆ˜ì •: .hwpx í™•ì¥ì ì¶”ê°€
                    const allowedExtensions = [
                        // ì´ë¯¸ì§€
                        '.jpg', '.jpeg', '.png', '.gif', '.webp', '.svg',
                        // ë¬¸ì„œ
                        '.pdf', '.doc', '.docx', '.xls', '.xlsx', '.ppt', '.pptx',
                        // í…ìŠ¤íŠ¸
                        '.txt', '.csv', '.rtf',
                        // ğŸ”§ í•œê¸€ íŒŒì¼ - .hwpx ì¶”ê°€
                        '.hwp', '.hwpx',
                        // ì••ì¶•
                        '.zip', '.rar', '.7z'
                    ];

                    isValidType = allowedExtensions.some(ext => fileName.endsWith(ext));

                    if (isValidType) {
                        console.log('âœ… í™•ì¥ì ê¸°ë°˜ ê²€ì¦ í†µê³¼:', fileName);
                    }
                }

                // 3. íŒŒì¼ í˜•ì‹ ê²€ì¦ ì‹¤íŒ¨
                if (!isValidType) {
                    const fileExtension = file.name.substring(file.name.lastIndexOf('.'));
                    const errorMessage = `ì§€ì›ë˜ì§€ ì•ŠëŠ” íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤: ${fileExtension}`;
                    console.error('âŒ íŒŒì¼ í˜•ì‹ ê²€ì¦ ì‹¤íŒ¨:', file.name, file.type);

                    if (typeof showToast === 'function') {
                        showToast(errorMessage, 'error');
                    } else {
                        alert(errorMessage);
                    }
                    return false;
                }

                // 4. íŒŒì¼ í¬ê¸° ê²€ì¦
                if (file.size > maxSize) {
                    const errorMessage = `íŒŒì¼ í¬ê¸°ê°€ ë„ˆë¬´ í½ë‹ˆë‹¤ (ìµœëŒ€ 10MB): ${file.name}`;
                    console.error('âŒ íŒŒì¼ í¬ê¸° ê²€ì¦ ì‹¤íŒ¨:', file.name, `${(file.size / 1024 / 1024).toFixed(2)}MB`);

                    if (typeof showToast === 'function') {
                        showToast(errorMessage, 'error');
                    } else {
                        alert(errorMessage);
                    }
                    return false;
                }

                console.log('âœ… íŒŒì¼ ê²€ì¦ í†µê³¼:', file.name);
                return true;
            },

            // íŒŒì¼ ëª©ë¡ì— ì¶”ê°€
            addFileToList: function (file, status = 'uploading') {
                const fileId = 'file-' + Date.now() + '-' + Math.random().toString(36).substr(2, 9);
                const uploadedFilesContainer = document.getElementById('uploaded-files');

                const fileElement = document.createElement('div');
                fileElement.className = 'uploaded-file';
                fileElement.id = fileId;

                const statusIcon = status === 'uploading' ? 'â³' :
                    status === 'success' ? 'ğŸ“' :
                        status === 'error' ? 'âŒ' : 'ğŸ“';

                fileElement.innerHTML = `
                    <span class="file-icon">${statusIcon}</span>
                    <span class="file-name">${file.name}</span>
                    <span class="file-size">(${this.formatFileSize(file.size)})</span>
                    <span class="remove-file" onclick="WysiwygEditor.removeFileFromList('${fileId}')" title="ì œê±°">Ã—</span>
                `;

                uploadedFilesContainer.appendChild(fileElement);
                return fileId;
            },

            // íŒŒì¼ ëª©ë¡ ì—…ë°ì´íŠ¸
            updateFileInList: function (fileId, status, url = null, errorMessage = null) {
                const fileElement = document.getElementById(fileId);
                if (!fileElement) return;

                const iconElement = fileElement.querySelector('.file-icon');
                if (iconElement) {
                    if (status === 'success') {
                        iconElement.textContent = 'ğŸ“';
                        fileElement.classList.add('upload-success');
                    } else if (status === 'error') {
                        iconElement.textContent = 'âŒ';
                        fileElement.classList.add('upload-error');
                        if (errorMessage) {
                            fileElement.title = errorMessage;
                        }
                    }
                }

                if (url) {
                    fileElement.dataset.url = url;
                }
            },

            // íŒŒì¼ ëª©ë¡ì—ì„œ ì œê±°
            removeFileFromList: function (fileId) {
                const fileElement = document.getElementById(fileId);
                if (fileElement) {
                    fileElement.remove();
                }

                // uploadedFiles ë°°ì—´ì—ì„œë„ ì œê±°
                this.uploadedFiles = this.uploadedFiles.filter(file => file.id !== fileId);
            },

            // íŒŒì¼ í¬ê¸° í¬ë§·íŒ…
            formatFileSize: function (bytes) {
                if (bytes === 0) return '0 Bytes';
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            },

            // í”Œë ˆì´ìŠ¤í™€ë” ì—…ë°ì´íŠ¸
            updatePlaceholder: function () {
                const isEmpty = this.editor.textContent.trim() === '';
                if (isEmpty && !this.editor.querySelector('img, video, audio')) {
                    this.editor.classList.add('empty');
                    if (!this.editor.getAttribute('data-placeholder-added')) {
                        this.editor.setAttribute('data-placeholder-added', 'true');
                        const placeholder = this.editor.getAttribute('data-placeholder');
                        if (placeholder) {
                            this.editor.style.setProperty('--placeholder', `"${placeholder}"`);
                        }
                    }
                } else {
                    this.editor.classList.remove('empty');
                }
            },

            // íˆ´ë°” ìƒíƒœ ì—…ë°ì´íŠ¸
            updateToolbarState: function () {
                const commands = ['bold', 'italic', 'underline', 'strikethrough'];

                commands.forEach(command => {
                    const btn = this.toolbar.querySelector(`[data-command="${command}"]`);
                    if (btn) {
                        const isActive = document.queryCommandState(command);
                        btn.classList.toggle('active', isActive);
                    }
                });
            },

            // ë‚´ìš© ë™ê¸°í™” (hidden textareaì—)
            syncContent: function () {
                const hiddenTextarea = document.getElementById('post-content');
                if (hiddenTextarea) {
                    hiddenTextarea.value = this.editor.innerHTML;
                }
            },

            // ì—ë””í„° ë‚´ìš© ê°€ì ¸ì˜¤ê¸°
            getContent: function () {
                return this.editor.innerHTML;
            },

            // ì—ë””í„° ë‚´ìš© ì„¤ì •
            setContent: function (html) {
                this.editor.innerHTML = html;
                this.updatePlaceholder();
                this.syncContent();
            },

            // ì—ë””í„° ì´ˆê¸°í™” (ë‚´ìš© ì§€ìš°ê¸°)
            clear: function () {
                this.editor.innerHTML = '';
                this.uploadedFiles = [];
                const uploadedFilesContainer = document.getElementById('uploaded-files');
                if (uploadedFilesContainer) {
                    uploadedFilesContainer.innerHTML = '';
                }
                this.updatePlaceholder();
                this.syncContent();
            },

            // í¬ì»¤ìŠ¤
            focus: function () {
                this.editor.focus();
            }
        };

        // CSS ì¶”ê°€ (í”Œë ˆì´ìŠ¤í™€ë”ìš©)
        const style = document.createElement('style');
        style.textContent = `
            .wysiwyg-content.empty:before {
                content: var(--placeholder, "ë‚´ìš©ì„ ì…ë ¥í•˜ì„¸ìš”...");
                color: #9ca3af;
                pointer-events: none;
                position: absolute;
            }
            
            .wysiwyg-content.empty {
                position: relative;
            }

            .upload-success {
                background-color: #dcfce7 !important;
                border-color: #16a34a !important;
            }

            .upload-error {
                background-color: #fee2e2 !important;
                border-color: #ef4444 !important;
            }
        `;
        document.head.appendChild(style);

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì—ë””í„° ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function () {
            // ëª¨ë‹¬ì´ ì—´ë¦´ ë•Œ ì—ë””í„° ì´ˆê¸°í™”
            const addPostButton = document.getElementById('add-post-button');
            if (addPostButton) {
                const originalShowModal = window.boardManager?.showAddPostModal;
                if (originalShowModal) {
                    window.boardManager.showAddPostModal = function () {
                        originalShowModal.call(this);
                        // ëª¨ë‹¬ì´ ì—´ë¦° í›„ ì—ë””í„° ì´ˆê¸°í™”
                        setTimeout(() => {
                            WysiwygEditor.init();
                        }, 100);
                    };
                }
            }
        });

        console.log('âœ… WYSIWYG ì—ë””í„° ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ');
    </script>

    <!-- ğŸ”§ ë‹¤ë¥¸ ê´€ë¦¬ì í˜ì´ì§€ì™€ ì™„ì „ í†µì¼ëœ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ -->
    <script>
        console.log('=== ê²Œì‹œíŒ ê´€ë¦¬ í˜ì´ì§€ HTML ì´ˆê¸°í™” ì‹œì‘ ===');

        // ğŸš¨ ì¤‘ìš”: ëª¨ë“  ì´ˆê¸°í™” ë¡œì§ì€ board-management-enhanced.jsì—ì„œ ì²˜ë¦¬ë©ë‹ˆë‹¤.
        // HTMLì—ì„œëŠ” ë‹¨ìˆœíˆ ìŠ¤í¬ë¦½íŠ¸ ë¡œë”©ë§Œ ë‹´ë‹¹í•˜ê³ , ì‹¤ì œ ì´ˆê¸°í™”ëŠ” JS íŒŒì¼ì—ì„œ ìˆ˜í–‰í•©ë‹ˆë‹¤.

        console.log('ğŸ“‹ ê²Œì‹œíŒ ê´€ë¦¬ í˜ì´ì§€ HTML ë¡œë“œ ì™„ë£Œ');
        console.log('â³ board-management-enhanced.jsì˜ ì´ˆê¸°í™”ë¥¼ ëŒ€ê¸° ì¤‘...');

        // ë‹¤ë¥¸ ê´€ë¦¬ì í˜ì´ì§€ì™€ ë™ì¼í•œ íŒ¨í„´ìœ¼ë¡œ ê°„ì†Œí™”
        // ì‹¤ì œ ì´ˆê¸°í™”ëŠ” board-management-enhanced.jsì˜ window.addEventListener('load', ...) ì—ì„œ ì²˜ë¦¬ë©ë‹ˆë‹¤.

        console.log('=== ê²Œì‹œíŒ ê´€ë¦¬ í˜ì´ì§€ HTML ìŠ¤í¬ë¦½íŠ¸ ë¡œë”© ì™„ë£Œ ===');
    </script>
</body>

</html>