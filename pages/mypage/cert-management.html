<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>자격증 관리 - 디지털헬스케어센터</title>
    <meta name="description" content="디지털헬스케어센터의 마이페이지에서 자격증을 관리하세요.">
    <link rel="icon" href="../../../assets/images/logo/logo.jpeg">
    <link rel="manifest" href="../../../manifest.json">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="../../../assets/css/main.css">
    <!-- 경로 헬퍼 스크립트 (항상 가장 먼저 로드되어야 함) -->
    <script src="../../../assets/js/utils/script-loader.js"></script>
</head>

<body>
    <!-- 헤더 영역 -->
    <header id="main-header">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="logo flex items-center">
                <a href="javascript:window.location.href=window.adjustPath('index.html')">
                    <div class="flex items-center">
                        <img src="../../../assets/images/logo/logo.jpeg" alt="디지털헬스케어센터 로고" class="logo-image">
                        <div class="ml-3">
                            <span class="organization-name">사)문경 부설 헬스케어센터</span>
                        </div>
                    </div>
                </a>
            </div>
            <nav class="main-nav hidden md:flex">
                <ul class="flex space-x-6">
                    <li class="group relative nav-item">
                        <a href="#" class="text-gray-800 hover:text-blue-600 py-2 nav-link">기관 소개</a>
                        <ul
                            class="submenu absolute hidden group-hover:block bg-white shadow-lg rounded-md w-48 p-2 z-10">
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/about/overview.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">개요</a>
                            </li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/about/vision.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">목표 및 전략</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/about/business.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">사업 내용</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/about/organization.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">조직도</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/about/instructors.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">강사 소개</a></li>
                        </ul>
                    </li>
                    <li class="group relative nav-item">
                        <a href="#" class="text-gray-800 hover:text-blue-600 py-2 nav-link">자격증 소개</a>
                        <ul
                            class="submenu absolute hidden group-hover:block bg-white shadow-lg rounded-md w-48 p-2 z-10">
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/health-exercise.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">건강운동처방사</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/rehabilitation.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">운동재활지도자</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/pilates.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">필라테스 전문가</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/recreation.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">레크리에이션지도자</a></li>
                        </ul>
                    </li>
                    <li class="group relative nav-item">
                        <a href="#" class="text-gray-800 hover:text-blue-600 py-2 nav-link">교육 과정</a>
                        <ul
                            class="submenu absolute hidden group-hover:block bg-white shadow-lg rounded-md w-48 p-2 z-10">
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/education/course-info.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">교육 과정 안내</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/education/course-application.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">교육 신청</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/education/cert-application.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">자격증 신청</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/education/exam-info.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">시험 안내</a></li>
                        </ul>
                    </li>
                    <li class="group relative nav-item">
                        <a href="#" class="text-gray-800 hover:text-blue-600 py-2 nav-link">게시판</a>
                        <ul
                            class="submenu absolute hidden group-hover:block bg-white shadow-lg rounded-md w-48 p-2 z-10">
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/board/notice/index.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">공지사항</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/board/column/index.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">칼럼</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/board/materials/index.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">강의자료</a></li>
                            <li><a href="javascript:window.location.href=window.adjustPath('pages/board/videos/index.html')"
                                    class="block px-4 py-2 hover:bg-gray-100 rounded-md">동영상 강의</a></li>
                        </ul>
                    </li>
                </ul>
            </nav>
            <div class="auth-buttons flex items-center">
                <!-- Firebase에 의해 동적으로 업데이트됨 -->
                <a href="javascript:window.location.href=window.adjustPath('pages/auth/login.html')"
                    class="login-btn text-sm text-gray-600 hover:text-blue-600 mr-4">로그인</a>
                <a href="javascript:window.location.href=window.adjustPath('pages/auth/signup.html')"
                    class="signup-btn text-sm bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">회원가입</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden ml-4 hamburger-menu" aria-expanded="false"
                aria-controls="mobile-menu-overlay">
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
                <span class="hamburger-line"></span>
            </button>
        </div>

        <!-- Mobile Menu Overlay -->
        <div id="mobile-menu-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden md:hidden">
            <div class="bg-white h-full w-full flex flex-col">
                <!-- 모바일 메뉴 헤더 -->
                <div class="flex justify-between items-center p-4 bg-blue-600 text-white mobile-menu-header">
                    <span class="text-lg font-semibold">메뉴</span>
                    <button id="mobile-menu-close" class="text-2xl font-bold hover:text-gray-200">&times;</button>
                </div>

                <!-- 모바일 메뉴 컨텐츠 -->
                <div class="flex-1 overflow-y-auto bg-gray-50 mobile-menu-container">
                    <div class="p-4">
                        <!-- 회원 정보 영역 -->
                        <div class="mb-6 p-4 bg-white rounded-lg shadow-sm mobile-menu-user-info">
                            <span class="text-blue-600 font-semibold">로그인 해주세요 ></span>
                        </div>

                        <!-- 메인 메뉴 -->
                        <div class="space-y-2 mobile-menu-nav">
                            <!-- 기관 소개 -->
                            <div class="mobile-menu-item">
                                <button type="button">
                                    <div class="menu-icon">🏢</div>
                                    <div class="menu-text">기관 소개</div>
                                    <div class="toggle-icon">▶</div>
                                </button>
                                <div class="mobile-submenu">
                                    <a href="javascript:window.location.href=window.adjustPath('pages/about/overview.html')">개요</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/about/vision.html')">목표 및 전략</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/about/business.html')">사업 내용</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/about/organization.html')">조직도</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/about/instructors.html')">강사 소개</a>
                                </div>
                            </div>

                            <!-- 자격증 소개 -->
                            <div class="mobile-menu-item">
                                <button type="button">
                                    <div class="menu-icon">🎓</div>
                                    <div class="menu-text">자격증 소개</div>
                                    <div class="toggle-icon">▶</div>
                                </button>
                                <div class="mobile-submenu">
                                    <a href="javascript:window.location.href=window.adjustPath('pages/certificate/health-exercise.html')">건강운동처방사</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/certificate/rehabilitation.html')">운동재활지도자</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/certificate/pilates.html')">필라테스 전문가</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/certificate/recreation.html')">레크리에이션지도자</a>
                                </div>
                            </div>

                            <!-- 교육 과정 -->
                            <div class="mobile-menu-item">
                                <button type="button">
                                    <div class="menu-icon">📚</div>
                                    <div class="menu-text">교육 과정</div>
                                    <div class="toggle-icon">▶</div>
                                </button>
                                <div class="mobile-submenu">
                                    <a href="javascript:window.location.href=window.adjustPath('pages/education/course-info.html')">교육 과정 안내</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/education/course-application.html')">교육 신청</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/education/cert-application.html')">자격증 신청</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/education/exam-info.html')">시험 안내</a>
                                </div>
                            </div>

                            <!-- 게시판 -->
                            <div class="mobile-menu-item">
                                <button type="button">
                                    <div class="menu-icon">📋</div>
                                    <div class="menu-text">게시판</div>
                                    <div class="toggle-icon">▶</div>
                                </button>
                                <div class="mobile-submenu">
                                    <a href="javascript:window.location.href=window.adjustPath('pages/board/notice/index.html')">공지사항</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/board/column/index.html')">칼럼</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/board/materials/index.html')">강의자료</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/board/videos/index.html')">동영상 강의</a>
                                </div>
                            </div>

                            <!-- 마이페이지 -->
                            <div class="mobile-menu-item">
                                <button type="button">
                                    <div class="menu-icon">👤</div>
                                    <div class="menu-text">마이페이지</div>
                                    <div class="toggle-icon">▶</div>
                                </button>
                                <div class="mobile-submenu">
                                    <a href="javascript:window.location.href=window.adjustPath('pages/mypage/personal-info.html')">개인정보 관리</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/mypage/course-history.html')">수강 내역</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/mypage/cert-management.html')" class="active">자격증 관리</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/mypage/payment-history.html')">결제 내역</a>
                                </div>
                            </div>

                            <!-- 관리자 (조건부 표시) -->
                            <div class="mobile-menu-item admin-only" style="display: none;">
                                <button type="button">
                                    <div class="menu-icon">⚙️</div>
                                    <div class="menu-text">관리자</div>
                                    <div class="toggle-icon">▶</div>
                                </button>
                                <div class="mobile-submenu">
                                    <a href="javascript:window.location.href=window.adjustPath('pages/admin/dashboard.html')">대시보드</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/admin/user-management.html')">회원 관리</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/admin/course-management.html')">교육 관리</a>
                                    <a href="javascript:window.location.href=window.adjustPath('pages/admin/cert-management.html')">자격증 관리</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main>
        <div class="container mx-auto px-4 py-8">
            <div class="mypage-container">
                <!-- 사이드바 네비게이션 -->
                <aside class="mypage-sidebar">
                    <h2 class="text-xl font-bold mb-6">마이페이지</h2>
                    <ul class="mypage-nav">
                        <li class="mypage-nav-item">
                            <a href="javascript:window.location.href=window.adjustPath('pages/mypage/personal-info.html')" class="mypage-nav-link">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mypage-nav-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path fill-rule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clip-rule="evenodd" />
                                </svg>
                                개인정보 관리
                            </a>
                        </li>
                        <li class="mypage-nav-item">
                            <a href="javascript:window.location.href=window.adjustPath('pages/mypage/course-history.html')" class="mypage-nav-link">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mypage-nav-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z" />
                                </svg>
                                수강 내역
                            </a>
                        </li>
                        <li class="mypage-nav-item">
                            <a href="javascript:window.location.href=window.adjustPath('pages/mypage/cert-management.html')" class="mypage-nav-link active">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mypage-nav-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M5 4a2 2 0 012-2h6a2 2 0 012 2v14l-5-2.5L5 18V4z" />
                                </svg>
                                자격증 관리
                            </a>
                        </li>
                        <li class="mypage-nav-item">
                            <a href="javascript:window.location.href=window.adjustPath('pages/mypage/payment-history.html')" class="mypage-nav-link">
                                <svg xmlns="http://www.w3.org/2000/svg" class="mypage-nav-icon" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M4 4a2 2 0 00-2 2v1h16V6a2 2 0 00-2-2H4z" />
                                    <path fill-rule="evenodd" d="M18 9H2v5a2 2 0 002 2h12a2 2 0 002-2V9zM4 13a1 1 0 011-1h1a1 1 0 110 2H5a1 1 0 01-1-1zm5-1a1 1 0 100 2h1a1 1 0 100-2H9z" clip-rule="evenodd" />
                                </svg>
                                결제 내역
                            </a>
                        </li>
                    </ul>
                </aside>

                <!-- 메인 콘텐츠 -->
                <div class="mypage-content">
                    <div class="mypage-header">
                        <h1 class="mypage-title">자격증 관리</h1>
                        <p class="mypage-description">회원님의 자격증 현황을 확인하고 갱신 신청을 진행하세요.</p>
                    </div>

                    <!-- 현황 요약 대시보드 -->
                    <div class="content-card mb-6">
                        <div class="card-header">
                            <h2 class="card-title">현황 요약</h2>
                        </div>
                        <div class="p-4">
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <div class="stat-card">
                                    <div class="stat-icon">🎓</div>
                                    <div class="stat-content">
                                        <div class="stat-number" id="total-certs">2</div>
                                        <div class="stat-label">보유 자격증</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">📋</div>
                                    <div class="stat-content">
                                        <div class="stat-number" id="pending-applications">1</div>
                                        <div class="stat-label">신청 진행중</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">⚠️</div>
                                    <div class="stat-content">
                                        <div class="stat-number" id="expiring-certs">1</div>
                                        <div class="stat-label">갱신 필요</div>
                                    </div>
                                </div>
                                <div class="stat-card">
                                    <div class="stat-icon">✅</div>
                                    <div class="stat-content">
                                        <div class="stat-number" id="valid-certs">1</div>
                                        <div class="stat-label">유효 자격증</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 보유 자격증 -->
                    <div class="content-card mb-6">
                        <div class="card-header">
                            <h2 class="card-title">보유 자격증</h2>
                            <p class="card-subtitle">현재 보유하고 있는 자격증 목록입니다.</p>
                        </div>
                        <div class="p-4">
                            <div id="owned-certificates" class="space-y-4">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                            
                            <div id="no-owned-certs" class="empty-state hidden">
                                <div class="empty-state-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                    </svg>
                                </div>
                                <h3 class="empty-state-title">보유 자격증이 없습니다</h3>
                                <p class="empty-state-description">자격증 신청을 통해 자격증을 취득해보세요.</p>
                                <a href="javascript:window.location.href=window.adjustPath('pages/education/cert-application.html')" class="btn btn-primary">
                                    자격증 신청하기
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- 진행 현황 -->
                    <div class="content-card mb-6">
                        <div class="card-header">
                            <h2 class="card-title">진행 현황</h2>
                            <p class="card-subtitle">자격증 신청 및 갱신 진행 상황을 확인하세요.</p>
                        </div>
                        <div class="p-4">
                            <div id="progress-list" class="space-y-4">
                                <!-- JavaScript로 동적 생성 -->
                            </div>
                            
                            <div id="no-progress" class="empty-state hidden">
                                <div class="empty-state-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                    </svg>
                                </div>
                                <h3 class="empty-state-title">진행 중인 신청이 없습니다</h3>
                                <p class="empty-state-description">새로운 자격증 신청이나 갱신 신청을 해보세요.</p>
                            </div>
                        </div>
                    </div>

                    <!-- 빠른 액션 -->
                    <!-- 자격증 갱신 신청 섹션 - 개선된 버전 -->
                    <div class="content-card">
                        <div class="card-header">
                            <h2 class="card-title">자격증 갱신 신청</h2>
                            <p class="card-subtitle">자격증 만료가 임박했거나 이미 만료된 경우 갱신 신청을 진행하세요.</p>
                        </div>
                        <div class="p-4">
                            <div id="renewal-section">
                                <!-- 갱신 프로세스 단계 표시 -->
                                <div class="renewal-process">
                                    <h3 class="text-lg font-semibold text-gray-800 mb-4">갱신 프로세스</h3>
                                    <div class="process-steps">
                                        <div class="process-step">
                                            <div class="step-circle">1</div>
                                            <div class="step-label">자격 확인</div>
                                        </div>
                                        <div class="process-step">
                                            <div class="step-circle">2</div>
                                            <div class="step-label">서류 제출</div>
                                        </div>
                                        <div class="process-step">
                                            <div class="step-circle">3</div>
                                            <div class="step-label">교육 이수</div>
                                        </div>
                                        <div class="process-step">
                                            <div class="step-circle">4</div>
                                            <div class="step-label">결제</div>
                                        </div>
                                        <div class="process-step">
                                            <div class="step-circle">5</div>
                                            <div class="step-label">완료</div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 갱신 요구사항 정보 -->
                                <div class="renewal-info-card">
                                    <h4 class="text-lg font-semibold text-gray-800 mb-3">갱신 요구사항</h4>
                                    <div class="renewal-requirements">
                                        <div class="requirement-item">
                                            <div class="requirement-icon">📚</div>
                                            <div class="requirement-content">
                                                <h4>보수교육 이수</h4>
                                                <p>최소 10시간 이상의 보수교육 이수 필요<br>관련 증빙자료 제출 필수</p>
                                            </div>
                                        </div>
                                        <div class="requirement-item">
                                            <div class="requirement-icon">📋</div>
                                            <div class="requirement-content">
                                                <h4>서류 제출</h4>
                                                <p>신청서, 교육 이수증명서<br>신분증 사본 등 필요 서류</p>
                                            </div>
                                        </div>
                                        <div class="requirement-item">
                                            <div class="requirement-icon">💳</div>
                                            <div class="requirement-content">
                                                <h4>갱신 비용</h4>
                                                <p>갱신비 + 교육비<br>자격증별 상이 (30,000원~120,000원)</p>
                                            </div>
                                        </div>
                                        <div class="requirement-item">
                                            <div class="requirement-icon">📅</div>
                                            <div class="requirement-content">
                                                <h4>처리 기간</h4>
                                                <p>신청 후 7-14일<br>서류 검토 및 자격증 발급</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- 갱신 가능한 자격증이 있는 경우 -->
                                <div id="renewal-available" class="hidden">
                                    <div class="renewal-notice mb-4 p-4 bg-amber-50 border border-amber-200 rounded-lg">
                                        <div class="flex items-start">
                                            <div class="text-amber-600 mr-3 text-xl">⚠️</div>
                                            <div>
                                                <h3 class="font-semibold text-amber-800 mb-1">갱신이 필요한 자격증이 있습니다</h3>
                                                <p class="text-sm text-amber-700">자격증 유효기간이 만료되기 전에 갱신 신청을 진행해주세요.</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 갱신 상태 시각화 -->
                                    <div class="renewal-status-visual mb-4">
                                        <div class="status-header">
                                            <h4 class="status-title">갱신 진행 상황</h4>
                                            <span class="status-badge pending" id="renewal-status-badge">갱신 대기</span>
                                        </div>
                                        <div class="progress-visual">
                                            <div class="progress-track">
                                                <div class="progress-fill" id="renewal-progress-fill" style="width: 0%"></div>
                                            </div>
                                            <div class="progress-text">
                                                <span>진행률</span>
                                                <span id="renewal-progress-text">0%</span>
                                            </div>
                                        </div>
                                        <div class="mt-3">
                                            <p class="text-sm text-gray-600" id="renewal-status-message">
                                                갱신 신청을 시작하려면 아래에서 자격증을 선택하세요.
                                            </p>
                                        </div>
                                    </div>

                                    <div id="renewalable-certs" class="space-y-3">
                                        <!-- JavaScript로 동적 생성 -->
                                    </div>
                                </div>

                                <!-- 갱신 가능한 자격증이 없는 경우 -->
                                <div id="no-renewal-needed" class="text-center py-8">
                                    <div class="text-green-600 mb-4">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                    </div>
                                    <h3 class="text-lg font-semibold text-gray-800 mb-2">현재 갱신이 필요한 자격증이 없습니다</h3>
                                    <p class="text-gray-600 mb-4">모든 자격증이 유효 상태입니다. 만료일이 가까워지면 알림을 보내드립니다.</p>
                                    <div class="bg-blue-50 p-4 rounded-lg">
                                        <h4 class="font-medium text-blue-800 mb-2">갱신 시기 안내</h4>
                                        <ul class="text-sm text-blue-700 text-left space-y-1">
                                            <li>• 만료 90일 전부터 갱신 신청 가능</li>
                                            <li>• 만료 30일 전 자동 알림 발송</li>
                                            <li>• 만료 후에도 1년 이내 갱신 가능</li>
                                        </ul>
                                    </div>
                                </div>

                                <!-- 갱신 신청 도움말 -->
                                <div class="mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                                    <h4 class="font-semibold text-blue-800 mb-2 flex items-center">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                                        </svg>
                                        갱신 신청 안내
                                    </h4>
                                    <div class="text-sm text-blue-700 space-y-2">
                                        <p><strong>갱신 가능 시기:</strong> 자격증 만료일 90일 전부터 신청 가능</p>
                                        <p><strong>필요 서류:</strong> 보수교육 이수증명서, 신분증 사본, 신청서</p>
                                        <p><strong>처리 기간:</strong> 서류 접수 후 7~14일 (영업일 기준)</p>
                                        <p><strong>문의사항:</strong> 고객센터 02-123-4567 (평일 09:00~18:00)</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- 기존의 갱신 모달을 다음 내용으로 완전히 교체하세요 -->

    <!-- 자격증 갱신 신청 모달 - 개선된 버전 -->
    <div id="renewal-modal" class="modal hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="modal-content bg-white rounded-lg max-w-5xl w-full max-h-[90vh] overflow-y-auto mx-4">
            <div class="modal-header flex justify-between items-center p-6 border-b">
                <div>
                    <h3 class="text-xl font-bold text-gray-800">자격증 갱신 신청</h3>
                    <p class="text-sm text-gray-600 mt-1">단계별로 진행하여 갱신 신청을 완료하세요</p>
                </div>
                <button class="close text-gray-500 hover:text-gray-700" onclick="closeRenewalModal()">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            
            <div class="modal-body p-6">
                <!-- 모달 내 프로세스 단계 표시 -->
                <div class="renewal-process mb-6">
                    <div class="process-steps">
                        <div class="process-step" id="modal-step-1">
                            <div class="step-circle active">1</div>
                            <div class="step-label active">자격증 정보</div>
                        </div>
                        <div class="process-step" id="modal-step-2">
                            <div class="step-circle">2</div>
                            <div class="step-label">교육 정보</div>
                        </div>
                        <div class="process-step" id="modal-step-3">
                            <div class="step-circle">3</div>
                            <div class="step-label">배송 정보</div>
                        </div>
                        <div class="process-step" id="modal-step-4">
                            <div class="step-circle">4</div>
                            <div class="step-label">결제 정보</div>
                        </div>
                        <div class="process-step" id="modal-step-5">
                            <div class="step-circle">5</div>
                            <div class="step-label">완료</div>
                        </div>
                    </div>
                </div>

                <form id="renewal-form" class="space-y-6">
                    <!-- 1단계: 갱신 자격증 정보 -->
                    <div class="form-section" id="renewal-step-1">
                        <h4 class="section-title flex items-center">
                            <span class="bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-2">1</span>
                            갱신 자격증 정보
                        </h4>
                        <div class="selected-cert-info p-4 bg-gray-50 rounded-lg mb-4">
                            <div class="flex items-center justify-between">
                                <div>
                                    <h5 class="font-semibold text-gray-800" id="selected-cert-name">선택된 자격증</h5>
                                    <p class="text-sm text-gray-600 mt-1" id="selected-cert-details">자격증 정보</p>
                                </div>
                                <div class="text-right">
                                    <p class="text-sm text-gray-500" id="selected-cert-number">자격증 번호</p>
                                    <p class="text-sm font-medium text-red-600" id="selected-cert-expiry">만료일</p>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 갱신 자격 확인 -->
                        <div class="bg-green-50 border border-green-200 rounded-lg p-4 mb-4">
                            <h5 class="font-semibold text-green-800 mb-2 flex items-center">
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                </svg>
                                갱신 자격 확인 완료
                            </h5>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>✓ 자격증 유효성 확인</li>
                                <li>✓ 갱신 신청 가능 기간 확인</li>
                                <li>✓ 이전 갱신 이력 확인</li>
                            </ul>
                        </div>
                    </div>

                    <!-- 2단계: 갱신 교육 정보 -->
                    <div class="form-section" id="renewal-step-2">
                        <h4 class="section-title flex items-center">
                            <span class="bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-2">2</span>
                            갱신 교육 정보
                        </h4>
                        <div class="form-grid">
                            <div class="form-field form-field-full">
                                <label for="renewal-education-type" class="form-label">갱신 교육 유형 *</label>
                                <select id="renewal-education-type" name="education-type" class="form-select" required>
                                    <option value="">선택해주세요</option>
                                    <option value="online">온라인 교육 (할인 적용)</option>
                                    <option value="offline">오프라인 교육 (집합 교육)</option>
                                    <option value="completed">이미 이수 완료 (증빙서류 제출)</option>
                                </select>
                                <p class="field-description">교육 유형에 따라 비용이 달라질 수 있습니다.</p>
                            </div>

                            <div id="renewal-education-completion-field" class="form-field form-field-full hidden">
                                <label for="renewal-education-completion" class="form-label">교육 이수 증명서 *</label>
                                <div class="file-upload-area">
                                    <input type="file" id="renewal-education-completion" name="education-completion" class="file-input" accept=".pdf,.jpg,.png">
                                    <div class="file-drop-zone">
                                        <div class="upload-icon">📄</div>
                                        <p class="upload-text">교육 이수 증명서를 업로드하세요</p>
                                        <p class="upload-description">PDF, JPG, PNG 형식, 최대 5MB</p>
                                    </div>
                                    <div class="file-preview hidden">
                                        <p class="file-name"></p>
                                        <button type="button" class="remove-file">&times;</button>
                                    </div>
                                </div>
                            </div>

                            <div class="form-field">
                                <label for="renewal-cpe-hours" class="form-label">보수교육 이수 시간 *</label>
                                <input type="number" id="renewal-cpe-hours" name="cpe-hours" min="10" max="100" class="form-input" required>
                                <p class="field-description">최소 10시간 이상의 보수교육 이수가 필요합니다.</p>
                            </div>

                            <div class="form-field">
                                <label for="renewal-education-period" class="form-label">교육 기간</label>
                                <input type="text" id="renewal-education-period" name="education-period" class="form-input" placeholder="예: 2024.01.15 ~ 2024.02.15">
                                <p class="field-description">교육을 이수한 기간을 입력하세요.</p>
                            </div>

                            <div class="form-field form-field-full">
                                <label for="renewal-cpe-documents" class="form-label">보수교육 증빙자료 *</label>
                                <div class="file-upload-area">
                                    <input type="file" id="renewal-cpe-documents" name="cpe-documents" multiple class="file-input" required accept=".pdf,.jpg,.png">
                                    <div class="file-drop-zone">
                                        <div class="upload-icon">📚</div>
                                        <p class="upload-text">보수교육 증빙자료를 업로드하세요</p>
                                        <p class="upload-description">여러 파일 선택 가능 (최대 5개, 각 파일당 5MB)</p>
                                    </div>
                                    <div class="file-preview-list hidden">
                                        <!-- 파일 미리보기 목록 -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3단계: 배송 정보 -->
                    <div class="form-section" id="renewal-step-3">
                        <h4 class="section-title flex items-center">
                            <span class="bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-2">3</span>
                            배송 정보
                        </h4>
                        <div class="form-grid">
                            <div class="form-field form-field-full">
                                <label for="renewal-delivery-method" class="form-label">자격증 수령 방법 *</label>
                                <select id="renewal-delivery-method" name="delivery-method" class="form-select" required>
                                    <option value="physical">실물 자격증 (우편발송) - 무료</option>
                                    <option value="digital">디지털 자격증 (이메일 발송) - 무료</option>
                                    <option value="both">실물 + 디지털 자격증 - 추가 5,000원</option>
                                </select>
                                <p class="field-description">수령 방법에 따라 추가 비용이 발생할 수 있습니다.</p>
                            </div>

                            <div id="renewal-address-fields">
                                <div class="form-field form-field-full">
                                    <label for="renewal-recipient-name" class="form-label">수령인 이름 *</label>
                                    <input type="text" id="renewal-recipient-name" name="recipient-name" class="form-input" required>
                                </div>

                                <div class="form-field form-field-full">
                                    <label for="renewal-recipient-phone" class="form-label">수령인 연락처 *</label>
                                    <input type="tel" id="renewal-recipient-phone" name="recipient-phone" class="form-input" required>
                                </div>

                                <div class="form-field form-field-full">
                                    <label for="renewal-zipcode" class="form-label">우편번호 *</label>
                                    <div class="flex gap-2">
                                        <input type="text" id="renewal-zipcode" name="zipcode" class="form-input flex-1" readonly required>
                                        <button type="button" id="renewal-find-address" class="btn-outline">주소찾기</button>
                                    </div>
                                </div>

                                <div class="form-field form-field-full">
                                    <label for="renewal-address1" class="form-label">기본주소 *</label>
                                    <input type="text" id="renewal-address1" name="address1" class="form-input" readonly required>
                                </div>

                                <div class="form-field form-field-full">
                                    <label for="renewal-address2" class="form-label">상세주소 *</label>
                                    <input type="text" id="renewal-address2" name="address2" class="form-input" required>
                                </div>

                                <div class="form-field form-field-full">
                                    <label for="renewal-delivery-memo" class="form-label">배송 메모</label>
                                    <textarea id="renewal-delivery-memo" name="delivery-memo" class="form-input" rows="3" placeholder="배송 시 요청사항이 있으시면 입력해주세요."></textarea>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4단계: 결제 정보 -->
                    <div class="form-section" id="renewal-step-4">
                        <h4 class="section-title flex items-center">
                            <span class="bg-blue-100 text-blue-800 rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold mr-2">4</span>
                            결제 정보
                        </h4>
                        <div class="payment-summary-card">
                            <h5 class="font-bold text-gray-700 mb-3">결제 금액 상세</h5>
                            <div class="payment-row">
                                <span class="text-gray-600">갱신 기본 비용</span>
                                <span class="text-gray-800 renewal-fee">50,000원</span>
                            </div>
                            <div class="payment-row">
                                <span class="text-gray-600">교육 비용</span>
                                <span class="text-gray-800 education-fee">100,000원</span>
                            </div>
                            <div class="payment-row" id="renewal-delivery-fee-row" style="display: none;">
                                <span class="text-gray-600">배송 추가 비용</span>
                                <span class="text-gray-800 delivery-fee">5,000원</span>
                            </div>
                            <div class="payment-row">
                                <span class="text-gray-600">할인 금액</span>
                                <span class="text-red-600 discount-amount">-0원</span>
                            </div>
                            <div class="payment-row total">
                                <span class="text-gray-700 text-lg">총 결제 금액</span>
                                <span class="text-blue-600 text-xl font-bold total-amount">150,000원</span>
                            </div>
                        </div>

                        <!-- 할인 혜택 안내 -->
                        <div class="mt-4 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <h5 class="font-semibold text-green-800 mb-2">할인 혜택</h5>
                            <ul class="text-sm text-green-700 space-y-1">
                                <li>• 온라인 교육 선택 시: 교육비 20% 할인</li>
                                <li>• 조기 갱신 신청 시 (만료 60일 전): 갱신비 10% 할인</li>
                                <li>• 복수 자격증 동시 갱신 시: 총 금액 5% 추가 할인</li>
                            </ul>
                        </div>
                    </div>

                    <!-- 약관 동의 -->
                    <div class="agreement-section">
                        <div class="agreement-item main-agreement">
                            <label class="checkbox-label">
                                <input type="checkbox" id="renewal-agree-terms" name="agree-terms" required>
                                <span class="checkbox-text">개인정보 수집 및 이용, 자격증 갱신 약관에 동의합니다. (필수)</span>
                            </label>
                        </div>
                        <div class="agreement-item">
                            <label class="checkbox-label">
                                <input type="checkbox" id="renewal-agree-marketing" name="agree-marketing">
                                <span class="checkbox-text">교육 및 이벤트 정보 수신에 동의합니다. (선택)</span>
                            </label>
                        </div>
                    </div>

                    <input type="hidden" id="renewal-cert-id" name="cert-id">
                </form>
            </div>
            
            <div class="modal-footer p-6 border-t flex justify-between items-center">
                <div class="text-sm text-gray-500">
                    <span id="modal-step-info">1/4 단계 진행 중</span>
                </div>
                <div class="flex gap-3">
                    <button type="button" class="btn-outline" onclick="closeRenewalModal()">취소</button>
                    <button type="button" class="btn-primary" onclick="submitRenewalApplication()">
                        <span id="submit-button-text">갱신 신청하기</span>
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6" />
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- 로딩 상태 -->
    <div id="loading-state" class="loading-state hidden">
        <div class="loading-spinner"></div>
        <p class="mt-4 text-gray-600">자격증 정보를 불러오는 중입니다...</p>
    </div>

    <footer class="bg-gray-800 text-white">
        <div class="container mx-auto px-4 py-8">
            <!-- 상단: 메인 정보 섹션 -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-6">
                <!-- 기관 정보 -->
                <div>
                    <h3 class="text-lg font-bold mb-4 text-white">디지털헬스케어센터</h3>
                    <p class="text-gray-400 mb-4 text-sm leading-relaxed">
                        운동과학 기반 전문직업인력 양성을 위한 교육 및 자격 인증 관리 플랫폼
                    </p>
                    <!-- SNS 링크 -->
                    <div class="flex space-x-4 mt-4">
                        <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="인스타그램">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                stroke-linejoin="round" class="h-6 w-6">
                                <rect x="2" y="2" width="20" height="20" rx="5" ry="5"></rect>
                                <path d="m16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"></path>
                                <line x1="17.5" y1="6.5" x2="17.51" y2="6.5"></line>
                            </svg>
                        </a>
                        <a href="#" class="text-gray-400 hover:text-white transition-colors" aria-label="유튜브">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                                fill="currentColor" class="h-6 w-6">
                                <path
                                    d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z" />
                            </svg>
                        </a>
                    </div>
                </div>

                <!-- 바로가기 -->
                <div>
                    <h3 class="text-lg font-bold mb-4 text-white">바로가기</h3>
                    <ul class="space-y-2">
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/about/overview.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">기관 소개</a></li>
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/health-exercise.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">자격증 소개</a></li>
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/education/course-info.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">교육 과정</a></li>
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/board/notice/index.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">공지사항</a></li>
                    </ul>
                </div>

                <!-- 자격증 정보 -->
                <div>
                    <h3 class="text-lg font-bold mb-4 text-white">자격증 정보</h3>
                    <ul class="space-y-2">
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/health-exercise.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">건강운동처방사</a></li>
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/rehabilitation.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">운동재활지도자</a></li>
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/pilates.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">필라테스 전문가</a></li>
                        <li><a href="javascript:window.location.href=window.adjustPath('pages/certificate/recreation.html')"
                                class="text-gray-400 hover:text-white transition-colors text-sm">레크리에이션지도자</a></li>
                    </ul>
                </div>
            </div>

            <!-- 중간: 사업자 정보 -->
            <div class="border-t border-gray-700 pt-6 mb-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-400">
                    <div>
                        <p class="mb-1">상호: 사)문경 부설 헬스케어센터</p>
                        <p class="mb-1">주소: 서울특별시 강남구 테헤란로 123</p>
                        <p class="mb-1">전화: 02-123-4567</p>
                    </div>
                    <div>
                        <p class="mb-1">이메일: info@digitalhealthcare.org</p>
                        <p class="mb-1">사업자등록번호: 123-45-67890</p>
                        <p class="mb-1">통신판매신고번호: 제2024-서울강남-1234호</p>
                    </div>
                </div>
            </div>

            <!-- 하단: 저작권 정보 -->
            <div class="border-t border-gray-700 pt-4">
                <div class="flex flex-col md:flex-row justify-between items-center">
                    <div class="mb-4 md:mb-0">
                        <p class="text-sm text-gray-400">&copy; 2025 디지털헬스케어센터. All rights reserved.</p>
                    </div>
                    <div class="text-right">
                        <p class="text-xs text-gray-500">
                            <a href="#" class="hover:text-white transition-colors">문의하기</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Firebase SDK 템플릿 -->
    <script id="firebase-sdk-template" type="text/template">
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"><\/script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"><\/script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"><\/script>
        <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-storage-compat.js"><\/script>
        <script src="{basePath}assets/js/config/firebase-config.js"><\/script>
        <script src="{basePath}assets/js/services/auth-service.js"><\/script>
        <script src="{basePath}assets/js/services/local-auth-override.js"><\/script>
        <script src="{basePath}assets/js/services/db-service.js"><\/script>
        <script src="{basePath}assets/js/services/storage-service.js"><\/script>
        <script src="{basePath}assets/js/utils/validators.js"><\/script>
        <script src="{basePath}assets/js/utils/formatters.js"><\/script>
    </script>

    <!-- 추가 스크립트 템플릿 -->
    <script id="additional-scripts-template" type="text/template">
        <script src="{basePath}assets/js/components/header.js"><\/script>
        <script src="{basePath}assets/js/pages/mypage.js"><\/script>
        <script src="{basePath}assets/js/pages/mypage/cert-management-enhanced.js"><\/script>
        <script src="{basePath}assets/js/main.js"><\/script>
    </script>
</body>

</html>